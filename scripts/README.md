# Модульні скрипти для керування проектом Monobank Donate

Ця директорія містить модульну структуру скриптів для керування проектом Monobank Donate.

## Модульна архітектура

Система скриптів побудована на модульній архітектурі для кращої організації та масштабування:

- `utils/` - утиліти та допоміжні інструменти
  - `colors.js` - кольоровий вивід у консоль
  - `command-runner.js` - виконання команд у терміналі
  - `dependency-checker.js` - перевірка та встановлення залежностей
  - `fs-helpers.js` - функції для роботи з файловою системою
  
- `config/` - налаштування проекту
  - `env-manager.js` - керування .env файлами
  - `setup.js` - функції налаштування проекту
  - `templates/` - шаблони для генерації .env файлів
  
- `docker/` - керування Docker-контейнерами
  - `container-manager.js` - керування контейнерами
  - `compose-generator.js` - генерація docker-compose файлів
  - `dockerignore.js` - керування .dockerignore
  
- `local/` - запуск проекту локально
  - `backend.js` - запуск backend локально
  - `frontend.js` - запуск frontend локально
  - `combined.js` - запуск frontend + backend разом

- `https/` - налаштування HTTPS для проекту
  - `index.js` - головний модуль для керування HTTPS
  - `certificates.js` - генерація та керування SSL-сертифікатами
  - `https-config.js` - налаштування проекту для роботи з HTTPS
  
- `backup/` - модулі для резервного копіювання
  - `backup-manager.js` - створення та відновлення копій
  
- `ui/` - інтерфейс користувача
  - `messages.js` - повідомлення та форматування тексту
  - `prompts.js` - запити до користувача

- `index.js` - головний файл з меню та логікою керування

## Автоматична перевірка

Система скриптів включає автоматичну перевірку:

- **Залежності**: 
  - Перевірка власних залежностей скрипта
  - Перевірка залежностей frontend і backend перед запуском
  
- **Змінні середовища**:
  - Перевірка наявності .env файлів
  - Перевірка коректності налаштувань в .env файлах
  - Блокування запуску при відсутності критичних налаштувань
  
- **Системні вимоги**:
  - Перевірка Node.js
  - Перевірка Docker та Docker Compose
  - Перевірка наявності OpenSSL для HTTPS

## Запуск

Система скриптів запускається одним з наступних способів:

1. З кореневого каталогу проекту:
   ```
   node manage-project.js
   ```

2. Безпосередньо з папки scripts:
   ```
   cd scripts
   node index.js
   ```

## Встановлення залежностей

Залежності для скриптів встановлюються автоматично при першому запуску або вручну:

```
cd scripts
npm install
```

## Основні залежності

- chalk@4.1.2 - для кольорового виводу у консоль

## Особливості модуля HTTPS

Модуль HTTPS (`scripts/https/`) забезпечує повну підтримку HTTPS у проекті:

- **Автоматичне виявлення OpenSSL** - пошук у стандартних директоріях Windows
- **Генерація SSL-сертифікатів** - створення самопідписаних сертифікатів для розробки
- **Налаштування проекту** - оновлення конфігурацій для всіх компонентів системи:
  - Оновлення .env файлів для frontend та backend
  - Конфігурація Vite для підтримки HTTPS у режимі розробки
  - Налаштування Nginx для HTTPS у продакшн режимі
  - Оновлення Docker конфігурації для підтримки HTTPS
- **Резервне копіювання** - автоматичне створення резервних копій перед внесенням змін

## Розширення функціоналу

Для додавання нових функцій:

1. Створіть новий модуль у відповідній папці (або створіть нову папку)
2. Додайте експорт функцій з модуля
3. Імпортуйте функції в головний файл `index.js`
4. Інтегруйте у відповідний розділ меню

Рекомендовані принципи:
- Дотримуйтесь модульної архітектури
- Додавайте чіткі коментарі JSDoc
- Використовуйте спільні утиліти з utils/
- Забезпечуйте перевірку змінних середовища, де це потрібно

## Зворотна сумісність

Модульний підхід повністю сумісний з оригінальним скриптом `manage-project.js` у кореневій директорії. Головний скрипт автоматично перенаправляє на модульну версію.

## Меню керування

Меню розділено на логічні категорії для зручності користування:

- **Налаштування проекту** - встановлення залежностей, .env файли, HTTPS
- **Локальний запуск** - frontend, backend, або обидва разом
- **Docker керування** - розробка, продакшн, керування контейнерами
- **Резервне копіювання** - створення та відновлення конфігурацій 